//author @mlnck
window.console||(window.console={}),console.DEBUG="CONSOLE_DEBUG_LOG_DEBUG",console.NORM="CONSOLE_DEBUG_LOG_NORMAL",console.PROD="CONSOLE_DEBUG_LOG_PRODUCTION",console.INFO="CONSOLE_DEBUG_INFO",console.ERR="CONSOLE_DEBUG_ERR",console.WARN="CONSOLE_DEBUG_WARN",console.DO_PROFILE=!1,console.setLogLevel=function(o){this.logLevel=o===console.NORM?console.NORM:o===console.PROD?console.PROD:console.DEBUG},console.isLevel=function(o){return this.OVERRIDE_GLOBAL=o===console.NORM?console.NORM:o===console.PROD?console.PROD:console.DEBUG,this},console.debug=function(...o){function e(o,n=""){if("object"!=typeof o)return!1;let l=[],c=+n?"view table from item "+n+" above":"view root table";if(l.push(o),console.groupCollapsed(c),console.table(l),console.groupEnd(),Array.isArray(o)&&o.forEach(function(n,l){"object"==typeof o&&e(n,l)}),~String(o.constructor).indexOf("Object")){let n=0;for(let l in o)"object"==typeof o[l]&&e(o[l],n),n++}}function n(o){return~String(o).indexOf("CONSOLE_DEBUG_")?o.replace("CONSOLE_DEBUG_","").toLowerCase():"log"}console.DO_PROFILE&&console.profile("debug profile"),console.time("debugged in"),console.logLevel&&console.logLevel!=console.DEBUG&&o.splice(0,0,console.logLevel),console.OVERRIDE_GLOBAL&&(this.logLevel&&o.splice(0,1),o.splice(0,0,console.OVERRIDE_GLOBAL),delete console.OVERRIDE_GLOBAL);let l,c=0;switch(o[0]){case"CONSOLE_DEBUG_INFO":l="info";break;case"CONSOLE_DEBUG_ERR":l="error";break;case"CONSOLE_DEBUG_WARN":l="warn";break;case"CONSOLE_DEBUG_LOG_PRODUCTION":return!1;case"CONSOLE_DEBUG_LOG_NORMAL":return"err"===(l=n(o[1]))&&(l="error"),"log"===l?o.splice(0,1):o.splice(0,2),void console[l](o);case"CONSOLE_DEBUG_LOG_DEBUG":o.splice(0,1),l=n(o[0]);break;default:l="log"}console.count("--START DEBUG BLOCK--"),console.timeStamp("started at");for(let n=0;n<o.length;n++){if(~String(o[n]).indexOf("CONSOLE_DEBUG_")){c++;continue}let s=n+(1-c)+") ";"string"==typeof o[n]&&":"===o[n].charAt(o[n].length-1)?console[l](s,o[n],o[++n]):console[l](s,o[n]),function(o,n){"object"==typeof n&&console[l]("Tabular data for item "+o.replace(")","")+"â†´"),e(n)}(s,o[n])}console.groupCollapsed("Stack Trace:"),console.trace(),console.groupEnd(),console.timeEnd("debugged in"),console.log("--END DEBUG BLOCK--"),console.log(""),console.log(""),console.DO_PROFILE&&console.profileEnd("debug profile")};
